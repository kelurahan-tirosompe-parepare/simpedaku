<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SIMPEDAKU</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1>Selamat datang {{dataUser.nama}}</h1>
    <!--      SURAT KETERANGAN-->
    <!--     <h3>SURAT KETERANGAN</h3> -->
    <div class="btn-group">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Surat Keterangan
        </button>
        <ul class="dropdown-menu" id="suket">
          {{#each dataList.Keterangan}}
            <li><a
                class="dropdown-item"
                id="dropdown-{{@key}}"
                href="#dropdown-{{@key}}"
                aria-controls="dropdown-{{@key}}"
              >{{@key}}</a></li>
          {{/each}}
        </ul>
      </div>

      <!--     <h3>SURAT PENGANTAR</h3> -->
      <!--      SURAT PENGANTAR -->
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Surat Pengantar
        </button>
        <ul class="dropdown-menu" id="supen">
  {{#each dataList.Pengantar}}
          <li><a
              class="dropdown-item"
              id="dropdown-{{@key}}"
              href="#dropdown-{{@key}}"
              aria-controls="dropdown-{{@key}}"
            >{{@key}}</a></li>
  {{/each}}
        </ul>
      </div>
    </div>
    
<!--  form -->
    <div class="mx-5">
      <form id="kirim">
        
      
        
        <button type="submit" class="btn btn-primary">Kirim</button>
      </form>
    </div>

    <script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
  crossorigin="anonymous"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script>
      const templateForm = (isi) => {
        return `<div class="mb-3">
        <label for="form${isi}" class="form-label">${isi}</label>
        <input class="form-control" id="form${isi}" type="file" accept="image/*" capture="user" />
      </div>`
      }
      
      const dropdownItems = document.querySelectorAll(".dropdown-item");
      
      const listForm = JSON.parse('{{{dataForm}}}')
      
      dropdownItems.forEach((item) => {
          item.on("click",function(event) {
          event.preventDefault(); 
        
          const itemId = (item.getAttribute("id")).slice(9, item.getAttribute("id").length)

            const formArr = listForm.Keterangan[itemId]
            
            formArr.forEach((index, item) => {
              $(kirim).prepend(templateForm(item))
            })
            
            
            
        }) 
      });
      
      $(kirim).on("submit", function(ev){
        ev.preventDefault()
      })
    </script>
  </body>
</html>